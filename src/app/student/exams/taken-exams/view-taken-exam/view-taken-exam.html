@let takenExam = takenExamSig();
@let examItemsSig = examItems();

@if (takenExam) {
	<div class="mx-auto max-w-4xl p-6 space-y-6 bg-white/70 backdrop-blur rounded-xl shadow-sm border border-slate-200">
		<app-exam-header [takenExam]="takenExam">
			<div class="text-sm text-slate-600">
				Submitted answers: {{ takenExam?.answers?.length || 0 }}
			</div>
		</app-exam-header>

		@if (examItemsSig.length) {
			<div class="space-y-6">
				@for (item of examItemsSig; track item.id; let idx = $index) {
					<app-exam-question
						[item]="item"
						[index]="idx"
						[currentAnswer]="answers()[item.id]"
						[isReadonlySig]="true"
					/>
				}
			</div>
		} @else {
			<p class="text-slate-500 italic">No items available for this exam.</p>
		}
	</div>
} @else {
	<div class="max-w-md mx-auto mt-16 flex flex-col items-center gap-4 text-slate-500">
		<svg class="size-10 animate-pulse text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
			<path d="M12 6v6l4 2" stroke-linecap="round" stroke-linejoin="round" />
		</svg>
		<p>Loading taken exam...</p>
	</div>
}
