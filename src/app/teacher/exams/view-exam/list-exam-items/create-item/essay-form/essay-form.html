<form
  [formGroup]="essayForm"
  (ngSubmit)="createEssayItem()"
  class="space-y-4 p-4 bg-white rounded shadow max-w-xl mx-auto"
>
  <div>
    <label class="block text-sm font-medium mb-1" for="question"
      >Essay Question</label
    >
    <textarea
      id="question"
      formControlName="question"
      rows="3"
      class="w-full p-2 border rounded focus:outline-none focus:ring"
      placeholder="Enter essay question"
    ></textarea>
    @if (essayForm.controls.question.touched &&
    essayForm.controls.question.invalid) {
    <div class="text-red-500 text-xs mt-1">
      @if (essayForm.controls.question.errors?.['required']) {
      <span>Question is required.</span>
      } @if (essayForm.controls.question.errors?.['minlength']) {
      <span>Question must be at least 3 characters.</span>
      }
    </div>
    }
  </div>

  <div>
    <label class="block text-sm font-medium mb-1" for="expected_answer"
      >Sample Answer</label
    >
    <textarea
      id="answer"
      formControlName="expected_answer"
      rows="3"
      class="w-full p-2 border rounded focus:outline-none focus:ring"
      placeholder="Enter sample answer"
    ></textarea>
    @if (essayForm.controls.expected_answer.touched &&
    essayForm.controls.expected_answer.invalid) {
    <div class="text-red-500 text-xs mt-1">
      @if (essayForm.controls.expected_answer.errors?.['required']) {
      <span>Sample answer is required.</span>
      }
    </div>
    }
  </div>

  <div>
    <label class="block text-sm font-medium mb-1" for="points">Points</label>
    <input
      id="points"
      type="number"
      formControlName="points"
      min="1"
      class="w-24 p-2 border rounded focus:outline-none focus:ring"
    />
    @if (essayForm.controls.points.touched && essayForm.controls.points.invalid)
    {
    <div class="text-red-500 text-xs mt-1">
      @if (essayForm.controls.points.errors?.['required']) {
      <span>Points are required.</span>
      } @if (essayForm.controls.points.errors?.['min']) {
      <span>Minimum is 1 point.</span>
      }
    </div>
    }
  </div>

  <button
    type="submit"
    [disabled]="essayForm.invalid || isSavingSig()"
    class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50"
  >
    @if (!isSavingSig()) {
    <span>Add Essay Item</span>
    } @if (isSavingSig()) {
    <span>Saving...</span>
    }
  </button>
</form>
